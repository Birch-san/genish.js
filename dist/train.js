'use strict';

var _gen = require('./gen.js'),
    lt = require('./lt.js'),
    phasor = require('./phasor.js');

var proto = {
  basename: 'train',

  gen: function gen() {
    var inputs = _gen.getInputs(this),
        graph = lt(accum(div(inputs[0], 44100)), inputs[1]);

    return graph.gen();
  }
};

module.exports = function () {
  var period = arguments.length <= 0 || arguments[0] === undefined ? 440 : arguments[0];
  var pulsewidth = arguments.length <= 1 || arguments[1] === undefined ? .5 : arguments[1];

  var ugen = Object.create(proto);

  Object.assign(ugen, {
    uid: _gen.getUID(),
    inputs: [period, pulsewidth]
  });

  ugen.name = '' + ugen.basename + ugen.uid;

  return ugen;
};